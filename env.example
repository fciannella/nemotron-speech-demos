# Modern Pipeline Configuration
# Copy this to .env and fill in your values

# ============================================================
# Required: NVIDIA API Keys
# ============================================================
# Option 1: Use a single NGC key for both ASR and TTS
NVIDIA_API_KEY=nvapi-your-key-here

# Option 2: Use separate NGC keys for ASR and TTS
# (If set, these override NVIDIA_API_KEY for each service)
# NVIDIA_ASR_API_KEY=nvapi-your-asr-key-here
# NVIDIA_TTS_API_KEY=nvapi-your-tts-key-here

# ============================================================
# LLM Configuration
# ============================================================
# Option 1: Use simple OpenAI LLM for testing (recommended for quick testing)
# Set USE_SIMPLE_LLM=true and provide OPENAI_API_KEY
USE_SIMPLE_LLM=false
# OPENAI_API_KEY=sk-your-openai-key-here
# OPENAI_MODEL=gpt-4o-mini
# SYSTEM_PROMPT=You are a helpful AI voice assistant.

# Option 2: Use LangGraph (default, for production agents)
LANGGRAPH_BASE_URL=http://127.0.0.1:2024
LANGGRAPH_ASSISTANT=ace-base-agent
LANGGRAPH_STREAM_MODE=values
LANGGRAPH_DEBUG_STREAM=false
USER_EMAIL=test@example.com

# ============================================================
# NVIDIA Riva STT (Speech-to-Text)
# ============================================================
# Default ASR endpoint (used for en-US, es-US, de-DE, fr-FR, and multi-language mode)
NVIDIA_ASR_FUNCTION_ID=52b117d2-6c15-4cfa-a905-a67013bee409
RIVA_ASR_MODEL=parakeet-1.1b-en-US-asr-streaming-silero-vad-asr-bls-ensemble

# Mandarin/Chinese ASR endpoint (used ONLY when zh-CN selected in language-specific mode)
# NOTE: Mandarin is NOT supported in multi-language auto-detect mode
# Mandarin requires BOTH a separate function ID AND a separate API key
# NVIDIA_ASR_MANDARIN_FUNCTION_ID=your-mandarin-function-id-here
# NVIDIA_RIVA_MANDARIN_API_KEY=nvapi-your-mandarin-api-key-here

# Language configuration:
# - Specific language: en-US, es-ES, fr-FR, de-DE, etc.
# - Multi-language auto-detection: "multi" (requires multilingual model)
# 
# NOTE: The UI now has language selection! Users can choose their language
# from the UI flags. This setting serves as the default/fallback.
RIVA_ASR_LANGUAGE=en-US

# Multi-language detection (available with Parakeet 1.1b Multilingual or Whisper Large v3)
# When RIVA_ASR_LANGUAGE=multi:
# - Riva automatically detects the spoken language
# - Detected language is logged with each transcription
# - Language can change dynamically during conversation
# 
# Supported languages in UI (Language-Specific mode):
# - en-US (English US), es-US (Spanish US), de-DE (German)
# - fr-FR (French), zh-CN (Chinese Mandarin)
# Note: "Multilingual (Auto-detect)" mode uses "multi" automatically
LOG_DETECTED_LANGUAGE=true

# Text-based language validation (requires: pip install langdetect)
# Validates Riva's acoustic detection using text analysis
# Helps catch misdetections (e.g., Spanish detected as German)
# When mismatch found and text confidence > 0.85, overrides to text-detected language
VALIDATE_LANGUAGE_WITH_TEXT=true

# IMPORTANT: Language detection may not work for:
# - Very short utterances (< 1-2 seconds)
# - Unclear audio or background noise
# - Some interim results
# When language isn't detected, the system uses the last detected language

RIVA_ASR_AUTO_PUNCTUATION=true
RIVA_ASR_PROFANITY_FILTER=false
# RIVA_ASR_CUSTOM_CONFIG="enable_vad_endpointing:true,neural_vad.onset:0.65,apply_partial_itn:true"

# ============================================================
# NVIDIA Riva TTS (Text-to-Speech)
# ============================================================
# Magpie Multilingual Model (Supports 5 languages: EN, ES, FR, DE, ZH)
NVIDIA_TTS_FUNCTION_ID=c811837c-3343-42d9-83ef-a0a9e8f2be8c
RIVA_TTS_MODEL=magpie-tts-multilingual

# Voice ID format: Magpie-Multilingual.{LANGUAGE}.{Voice}.{Emotion}
# See docs/MAGPIE_TTS_LANGUAGES.md for complete voice list (60 voices total)
RIVA_TTS_VOICE_ID=Magpie-Multilingual.EN-US.Mia.Neutral

# Available voices by language:
# EN-US: Mia, Jason, Aria, Leo (with emotions: Angry, Calm, Happy, Neutral, Sad, Fearful)
# ES-US: Isabela, Diego (NO emotion variants)
# FR-FR: Louise, Pascal (emotions: Calm, Disgusted, Fearful, Happy, Neutral, Sad, Angry)
# DE-DE: Aria, Jason, Leo, Diego (various emotions)
# ZH-CN: Mia, Aria, Diego, Isabela, Pascal, Louise (NO emotion variants)

# TTS Language (use specific language, not "multi")
# When RIVA_ASR_LANGUAGE=multi, TTS will auto-switch based on detected language
RIVA_TTS_LANGUAGE=en-US
RIVA_TTS_QUALITY=20

# Legacy: Magpie ZeroShot Model (Voice cloning - deprecated for multilingual)
# NVIDIA_TTS_FUNCTION_ID=4e813649-d5e4-4020-b2be-2b918396d19d
# RIVA_TTS_MODEL=magpie_tts_ensemble-Magpie-ZeroShot
# RIVA_TTS_VOICE_ID=Magpie-ZeroShot.Female-1
# RIVA_TTS_LANGUAGE=en-US
# RIVA_TTS_QUALITY=20

# Multilingual Voice Examples (60 voices total):
# English:  Magpie-Multilingual.EN-US.Mia.Happy, Magpie-Multilingual.EN-US.Jason.Calm
# Spanish:  Magpie-Multilingual.ES-US.Isabela, Magpie-Multilingual.ES-US.Diego
# French:   Magpie-Multilingual.FR-FR.Louise.Neutral, Magpie-Multilingual.FR-FR.Pascal.Happy
# German:   Magpie-Multilingual.DE-DE.Aria.Calm, Magpie-Multilingual.DE-DE.Jason.Happy
# Mandarin: Magpie-Multilingual.ZH-CN.Mia, Magpie-Multilingual.ZH-CN.Aria
# See docs/MAGPIE_TTS_LANGUAGES.md for complete list

# ============================================================
# Audio Configuration
# ============================================================
AUDIO_SAMPLE_RATE=16000

# ============================================================
# Logging / Debug
# ============================================================
# Transcription logging (currently disabled due to Pipecat compatibility)
# TRANSCRIPTION_LOGGING=false

# Log levels for pipeline debugging:
# - Normal mode: python pipeline_modern.py
# - Verbose mode: python pipeline_modern.py -v
# - Very verbose: python pipeline_modern.py -vv

# ============================================================
# Optional: Advanced Features
# ============================================================
# ZERO_SHOT_AUDIO_PROMPT=/path/to/voice_sample.wav
# IPA_DICT_FILE=/path/to/ipa.json
# EXCLUDE_ASSISTANTS=healthcare-agent

# ============================================================
# Optional: Twilio TURN (for production)
# ============================================================
# TWILIO_ACCOUNT_SID=your-sid
# TWILIO_AUTH_TOKEN=your-token

